<!DOCTYPE html>
<html>
	<head>
		<!--
		IE8 runs 'intranet sites' in compatibility mode by default, which we
		do not want as we are not aiming at IE7 support.
		-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

		<title>jquery.htmleditable.js</title>

		<!--
		We need jQuery at this stage because `jquery.browser.min.js` depends on
		it.
		-->
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.7b2.js"></script>
		<!--
		Load these environment checkers before any style sheets because styling
		may be based on classes that are set by the checkers. If we would load
		the checkers at a later stage everything would still work in the sense
		that the page ends up in the same state, but it may not be desirable.
		For example; imagine that we want to block a part of the interface in
		case the environment does not meet certain criteria. In scenarios like
		that we would like to have a guarantee that this piece of interface is
		*never* displayed, not even briefly.
		-->
		<script type="text/javascript" src="http://dev/jquery.htmleditable.js/_site/assets/jquery.browser.min.js"></script>
		<script type="text/javascript" src="http://dev/jquery.htmleditable.js/_site/assets/modernizr.js"></script>
		<!--
		TODO: Styling before any content, yet it looks like Firefox is building
		the document before the styling has been applied. The result is a flash
		of unstyled content. Hmm, how can we prevent this?
		-->
		<!-- <link class="theme" rel="stylesheet" type="text/css" href="http://projects.smart.pr/project-site.themes/smartpr-oss.css" /> -->
		<link class="theme" rel="stylesheet" type="text/css" href="http://dev/project-site.themes/smartpr-oss.css" />
		<link rel="stylesheet" type="text/css" href="http://dev/jquery.htmleditable.js/_site/assets/site.css" />
	</head>
	<body>
		<header>
			<h1>jquery.htmleditable.js <span class="version">vmaster</span></h1>
			<h2>contenteditable’s missing API</h2>
		</header>
		
		<nav>
			<a href="http://dev/jquery.htmleditable.js/_site/index.html">overview</a>
			<a href="http://dev/jquery.htmleditable.js/_site/demo.html" class="selected">demo</a>
			<a href="https://github.com/smartpr/jquery.htmleditable.js/raw/master/jquery.htmleditable.standalone.min.js">download</a>
			<a href="http://dev/jquery.htmleditable.js/_site/doc/index.html">documentation</a>
			<a href="http://dev/jquery.htmleditable.js/_site/test.html">tests</a>
			<a href="https://github.com/smartpr/jquery.htmleditable.js">development</a>
		</nav>

		<section>
			<script type="text/javascript" src="lib/rangy-core.js"></script>
<script type="text/javascript" src="lib/rangy-selectionsaverestore.js"></script>
<script type="text/javascript" src="lib/htmlparser.js"></script>
<script type="text/javascript" src="lib/jquery.pluginify.js"></script>
<script type="text/javascript" src="lib/jquery.hotkeys.js"></script>
<script type="text/javascript" src="lib/core.js"></script>
<script type="text/javascript" src="lib/base.js"></script>
<script type="text/javascript" src="lib/multiline.js"></script>
<script type="text/javascript" src="lib/singleline.js"></script>
<script type="text/javascript" src="lib/bold.js"></script>

<aside id="preview">
	<h3>Live preview</h3>
	<div class="content"></div>
</aside>

<article>
	<p>Proof that <dfn>htmleditable</dfn> is Versatile &#8211; yeah that&#8217;s right, with a capital <em>V</em>.</p>

<h3 id='rich_text_area'>Rich text area</h3>

<p>It can be used as a <code>textarea</code> replacement, including resizing corner tip (in browsers that have them on text areas).</p>
<style>
  html.gecko #demo-area {
    outline: none;
  }
  #demo-area {
    -moz-appearance: textfield;
    -webkit-appearance: textfield;
    appearance: textfield;
    /* Enable scrollbars when necessary. */
    overflow-x: auto;
    overflow-y: auto;
    /* Like `textarea`'s default behavior, make it resizable in both
       dimensions (if supported by the browser). */
    resize: both;
    /* Give it some initial size below which it will not be resizable. */
    width: 20em;
    height: 5em;
    padding: .5em;
  }
  #demo-area > p:last-child {
    margin-bottom: 0;
  }
</style><div id='demo-area'>
  <p>Yeah this was <strong>already</strong> in here...</p>
</div><script>
  $('#demo-area').htmleditable(['bold']);
</script><details>
<summary>Source</summary>

<div class='highlight'><pre><code class='html'><span class='nt'>&lt;style&gt;</span>
  <span class='nt'>html</span><span class='nc'>.gecko</span> <span class='nf'>#demo-area</span> <span class='p'>{</span>
    <span class='k'>outline</span><span class='o'>:</span> <span class='k'>none</span><span class='p'>;</span>
  <span class='p'>}</span>
  <span class='nf'>#demo-area</span> <span class='p'>{</span>
    <span class='o'>-</span><span class='n'>moz</span><span class='o'>-</span><span class='n'>appearance</span><span class='o'>:</span> <span class='n'>textfield</span><span class='p'>;</span>
    <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>appearance</span><span class='o'>:</span> <span class='n'>textfield</span><span class='p'>;</span>
    <span class='n'>appearance</span><span class='o'>:</span> <span class='n'>textfield</span><span class='p'>;</span>
    <span class='c'>/* Enable scrollbars when necessary. */</span>
    <span class='k'>overflow-x</span><span class='o'>:</span> <span class='k'>auto</span><span class='p'>;</span>
    <span class='k'>overflow-y</span><span class='o'>:</span> <span class='k'>auto</span><span class='p'>;</span>
    <span class='c'>/* Like `textarea`&#39;s default behavior, make it resizable in both</span>
<span class='c'>       dimensions (if supported by the browser). */</span>
    <span class='n'>resize</span><span class='o'>:</span> <span class='k'>both</span><span class='p'>;</span>
    <span class='c'>/* Give it some initial size below which it will not be resizable. */</span>
    <span class='k'>width</span><span class='o'>:</span> <span class='m'>20em</span><span class='p'>;</span>
    <span class='k'>height</span><span class='o'>:</span> <span class='m'>5em</span><span class='p'>;</span>
    <span class='k'>padding</span><span class='o'>:</span> <span class='m'>.5em</span><span class='p'>;</span>
  <span class='p'>}</span>
  <span class='nf'>#demo-area</span> <span class='o'>&gt;</span> <span class='nt'>p</span><span class='nd'>:last-child</span> <span class='p'>{</span>
    <span class='k'>margin-bottom</span><span class='o'>:</span> <span class='m'>0</span><span class='p'>;</span>
  <span class='p'>}</span>
<span class='nt'>&lt;/style&gt;</span>

<span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;demo-area&quot;</span><span class='nt'>&gt;</span>
  <span class='nt'>&lt;p&gt;</span>Yeah this was <span class='nt'>&lt;strong&gt;</span>already<span class='nt'>&lt;/strong&gt;</span> in here...<span class='nt'>&lt;/p&gt;</span>
<span class='nt'>&lt;/div&gt;</span>

<span class='nt'>&lt;script&gt;</span>
  <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#demo-area&#39;</span><span class='p'>).</span><span class='nx'>htmleditable</span><span class='p'>([</span><span class='s1'>&#39;bold&#39;</span><span class='p'>]);</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>


</details>
<h3 id='rich_text_input'>Rich text input</h3>

<p>Similar to the rich text area, we can mimic a regular text input. Note the auto-resizing coolness!</p>
<style>
  html.gecko #demo-input {
    outline: none;
  }
  #demo-input {
    -moz-appearance: textfield;
    -webkit-appearance: textfield;
    appearance: textfield;
    overflow-y: hidden;
    min-width: 20em;
    padding: .3em;
    display: inline-block;
  }
</style><div id='demo-input'>
  Yeah this was <strong>already</strong> in here...
</div><script>
  $('#demo-input').htmleditable(['singleline', 'bold']);
</script><details>
<summary>Source</summary>

<div class='highlight'><pre><code class='html'><span class='nt'>&lt;style&gt;</span>
  <span class='nt'>html</span><span class='nc'>.gecko</span> <span class='nf'>#demo-input</span> <span class='p'>{</span>
    <span class='k'>outline</span><span class='o'>:</span> <span class='k'>none</span><span class='p'>;</span>
  <span class='p'>}</span>
  <span class='nf'>#demo-input</span> <span class='p'>{</span>
    <span class='o'>-</span><span class='n'>moz</span><span class='o'>-</span><span class='n'>appearance</span><span class='o'>:</span> <span class='n'>textfield</span><span class='p'>;</span>
    <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>appearance</span><span class='o'>:</span> <span class='n'>textfield</span><span class='p'>;</span>
    <span class='n'>appearance</span><span class='o'>:</span> <span class='n'>textfield</span><span class='p'>;</span>
    <span class='k'>overflow-y</span><span class='o'>:</span> <span class='k'>hidden</span><span class='p'>;</span>
    <span class='k'>min-width</span><span class='o'>:</span> <span class='m'>20em</span><span class='p'>;</span>
    <span class='k'>padding</span><span class='o'>:</span> <span class='m'>.3em</span><span class='p'>;</span>
    <span class='k'>display</span><span class='o'>:</span> <span class='k'>inline</span><span class='o'>-</span><span class='k'>block</span><span class='p'>;</span>
  <span class='p'>}</span>
<span class='nt'>&lt;/style&gt;</span>

<span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;demo-input&quot;</span><span class='nt'>&gt;</span>
  Yeah this was <span class='nt'>&lt;strong&gt;</span>already<span class='nt'>&lt;/strong&gt;</span> in here...
<span class='nt'>&lt;/div&gt;</span>

<span class='nt'>&lt;script&gt;</span>
  <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#demo-input&#39;</span><span class='p'>).</span><span class='nx'>htmleditable</span><span class='p'>([</span><span class='s1'>&#39;singleline&#39;</span><span class='p'>,</span> <span class='s1'>&#39;bold&#39;</span><span class='p'>]);</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>


</details>
<h3 id='simple_rich_text_editor'>Simple rich text editor</h3>

<p>Or leverage the fact that we are dealing with a regular block element and let it fit the content. (An entirely browser-powered auto-resizing text area, how cool is that?!)</p>
<style type='text/css'>
  html.gecko #richtextarea-autofit {
    outline: none;
  }
  #richtextarea-autofit {
    -moz-appearance: textfield;
    -webkit-appearance: textfield;
    appearance: textfield;
    padding: .5em;
    overflow-x: auto;
    display: inline-block;
  }
  #richtextarea-autofit > p:last-child {
    margin-bottom: 0;
  }
</style><div id='richtextarea-autofit'>
  <p>Yeah this was <strong>already</strong> in here...</p>
</div><script type='text/javascript'>
  $('#richtextarea-autofit').htmleditable(['bold']);
</script><details>
<summary>Source</summary>

<div class='highlight'><pre><code class='html'><span class='nt'>&lt;style </span><span class='na'>type=</span><span class='s'>&quot;text/css&quot;</span><span class='nt'>&gt;</span>
  <span class='nt'>html</span><span class='nc'>.gecko</span> <span class='nf'>#richtextarea-autofit</span> <span class='p'>{</span>
    <span class='k'>outline</span><span class='o'>:</span> <span class='k'>none</span><span class='p'>;</span>
  <span class='p'>}</span>
  <span class='nf'>#richtextarea-autofit</span> <span class='p'>{</span>
    <span class='o'>-</span><span class='n'>moz</span><span class='o'>-</span><span class='n'>appearance</span><span class='o'>:</span> <span class='n'>textfield</span><span class='p'>;</span>
    <span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>appearance</span><span class='o'>:</span> <span class='n'>textfield</span><span class='p'>;</span>
    <span class='n'>appearance</span><span class='o'>:</span> <span class='n'>textfield</span><span class='p'>;</span>
    <span class='k'>padding</span><span class='o'>:</span> <span class='m'>.5em</span><span class='p'>;</span>
    <span class='k'>overflow-x</span><span class='o'>:</span> <span class='k'>auto</span><span class='p'>;</span>
    <span class='k'>display</span><span class='o'>:</span> <span class='k'>inline</span><span class='o'>-</span><span class='k'>block</span><span class='p'>;</span>
  <span class='p'>}</span>
  <span class='nf'>#richtextarea-autofit</span> <span class='o'>&gt;</span> <span class='nt'>p</span><span class='nd'>:last-child</span> <span class='p'>{</span>
    <span class='k'>margin-bottom</span><span class='o'>:</span> <span class='m'>0</span><span class='p'>;</span>
  <span class='p'>}</span>
<span class='nt'>&lt;/style&gt;</span>

<span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;richtextarea-autofit&quot;</span><span class='nt'>&gt;</span>
  <span class='nt'>&lt;p&gt;</span>Yeah this was <span class='nt'>&lt;strong&gt;</span>already<span class='nt'>&lt;/strong&gt;</span> in here...<span class='nt'>&lt;/p&gt;</span>
<span class='nt'>&lt;/div&gt;</span>

<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span><span class='nt'>&gt;</span>
  <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#richtextarea-autofit&#39;</span><span class='p'>).</span><span class='nx'>htmleditable</span><span class='p'>([</span><span class='s1'>&#39;bold&#39;</span><span class='p'>]);</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>


</details>
<h3 id='word_processor_wannabe'>Word processor wannabe</h3>

<p>&#8230;</p>

<h3 id='inline_editing'>Inline editing</h3>
<style>
  #demo-inline .inline {
    outline: none;
  }
  #demo-inline:hover .inline {
    background-color: LemonChiffon;
  }
  #demo-inline .inline:focus {
    background-color: Yellow;
  }
</style><div id='demo-inline'>
  You can blend in <span class='inline'>editable areas</span> seamlessly
  inside any content, including in <a href='http://smart.pr/'>places where
  <span class='inline'>you might <strong>not</strong> be expecting</span>
  them</a>. <em>Officially <span class='inline'>amazing</span>, isn't it?!</em>
  You can apply formatting as usual &ndash; try <kbd>⌘B</kbd> for bold.
</div><script>
  $('#demo-inline .inline').
    on('click', function(e) {
      e.preventDefault();
    }).
    htmleditable(['singleline', 'bold']);
</script><details>
<summary>Source</summary>

<div class='highlight'><pre><code class='html'><span class='nt'>&lt;style&gt;</span>
  <span class='nf'>#demo-inline</span> <span class='nc'>.inline</span> <span class='p'>{</span>
    <span class='k'>outline</span><span class='o'>:</span> <span class='k'>none</span><span class='p'>;</span>
  <span class='p'>}</span>
  <span class='nf'>#demo-inline</span><span class='nd'>:hover</span> <span class='nc'>.inline</span> <span class='p'>{</span>
    <span class='k'>background-color</span><span class='o'>:</span> <span class='n'>LemonChiffon</span><span class='p'>;</span>
  <span class='p'>}</span>
  <span class='nf'>#demo-inline</span> <span class='nc'>.inline</span><span class='nd'>:focus</span> <span class='p'>{</span>
    <span class='k'>background-color</span><span class='o'>:</span> <span class='n'>Yellow</span><span class='p'>;</span>
  <span class='p'>}</span>
<span class='nt'>&lt;/style&gt;</span>

<span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;demo-inline&quot;</span><span class='nt'>&gt;</span>
  You can blend in <span class='nt'>&lt;span</span> <span class='na'>class=</span><span class='s'>&quot;inline&quot;</span><span class='nt'>&gt;</span>editable areas<span class='nt'>&lt;/span&gt;</span> seamlessly
  inside any content, including in <span class='nt'>&lt;a</span> <span class='na'>href=</span><span class='s'>&quot;http://smart.pr/&quot;</span><span class='nt'>&gt;</span>places where
  <span class='nt'>&lt;span</span> <span class='na'>class=</span><span class='s'>&quot;inline&quot;</span><span class='nt'>&gt;</span>you might <span class='nt'>&lt;strong&gt;</span>not<span class='nt'>&lt;/strong&gt;</span> be expecting<span class='nt'>&lt;/span&gt;</span>
  them<span class='nt'>&lt;/a&gt;</span>. <span class='nt'>&lt;em&gt;</span>Officially <span class='nt'>&lt;span</span> <span class='na'>class=</span><span class='s'>&quot;inline&quot;</span><span class='nt'>&gt;</span>amazing<span class='nt'>&lt;/span&gt;</span>, isn&#39;t it?!<span class='nt'>&lt;/em&gt;</span>
  You can apply formatting as usual <span class='ni'>&amp;ndash;</span> try <span class='nt'>&lt;kbd&gt;</span>⌘B<span class='nt'>&lt;/kbd&gt;</span> for bold.
<span class='nt'>&lt;/div&gt;</span>

<span class='nt'>&lt;script&gt;</span>
  <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#demo-inline .inline&#39;</span><span class='p'>).</span>
    <span class='nx'>on</span><span class='p'>(</span><span class='s1'>&#39;click&#39;</span><span class='p'>,</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>e</span><span class='p'>)</span> <span class='p'>{</span>
      <span class='nx'>e</span><span class='p'>.</span><span class='nx'>preventDefault</span><span class='p'>();</span>
    <span class='p'>}).</span>
    <span class='nx'>htmleditable</span><span class='p'>([</span><span class='s1'>&#39;singleline&#39;</span><span class='p'>,</span> <span class='s1'>&#39;bold&#39;</span><span class='p'>]);</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>


</details>
</article>

<script>
	
	jQuery(function($) {
		
		// Update the live preview.

		$(':htmleditable').on('focus change', function() {
			$('#preview > .content').html($(this).htmleditable('value'));
		});

		// Make the live preview always be within the viewport.

		// TODO: max-height for both $content and $sticky.

		var $content = $('#preview > .content'),
			spacing = $content.offset().top - $content.prev().offset().top - $content.prev().outerHeight(),
			$sticky = $content.clone().css({
				position: 'fixed',
				top: spacing,
				left: $content.offset().left,
				width: $content.width()
			}).hide().insertAfter($content);
		
		$(window).
			on('scroll', function() {
				var isStickyNeeded = $content.offset().top - $(document).scrollTop() <= spacing;
				if ($sticky.is(':visible') !== isStickyNeeded) {
					$sticky[isStickyNeeded ? 'show' : 'hide']();
					$content.css('visibility', isStickyNeeded ? 'hidden' : '');
				}
			}).
			on('resize', function() {
				// Is being called when zooming as well.
				// TODO: That is, in Chrome. Other browsers?
				$sticky.css({
					left: $content.offset().left,
					width: $content.width()
				});
			});
	
	});

</script>
		</section>

		<footer>
			<p>
				Made with <span class="love">&hearts;</span> by
				<a href="http://twitter.com/timmolendijk">Tim Molendijk</a>
			</p>
			<button class="no-theme">Disable Theme</button>
		</footer>
		<script type="text/javascript">
			
			$('footer .no-theme').on('click', function() {
				$('[type="text/css"].theme').add(this).remove();
			});

		</script>

		<script type="text/javascript">
			var clicky_site_ids = clicky_site_ids || [];
			clicky_site_ids.push(66488240);
			(function() {
				var s = document.createElement('script');
				s.type = 'text/javascript';
				s.async = true;
				s.src = '//static.getclicky.com/js';
				document.getElementsByTagName('head')[0].appendChild(s);
			})();
		</script>
	</body>
</html>