<!DOCTYPE html>
<html>
	<head>
		<!--
		IE8 runs 'intranet sites' in compatibility mode by default, which we
		do not want as we are not aiming at IE7 support.
		-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

		<title>jquery.htmleditable.js</title>

		<!--
		We need jQuery at this stage because `jquery.browser.min.js` depends on
		it.
		-->
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.js"></script>
		<!--
		Load these environment checkers before any style sheets because styling
		may be based on classes that are set by the checkers. If we would load
		the checkers at a later stage everything would still work in the sense
		that the page ends up in the same state, but it may not be desirable.
		For example; imagine that we want to block a part of the interface in
		case the environment does not meet certain criteria. In scenarios like
		that we would like to have a guarantee that this piece of interface is
		*never* displayed, not even briefly.
		-->
		<script type="text/javascript" src="http://dev/jquery.htmleditable.js/_site/assets/jquery.browser.min.js"></script>
		<script type="text/javascript" src="http://dev/jquery.htmleditable.js/_site/assets/modernizr.js"></script>
		<!--
		TODO: Styling before any content, yet it looks like Firefox is building
		the document before the styling has been applied. The result is a flash
		of unstyled content. Hmm, how can we prevent this?
		-->
		<!-- <link class="theme" rel="stylesheet" type="text/css" href="http://projects.smart.pr/project-site.themes/smartpr-oss.css" /> -->
		<link class="theme" rel="stylesheet" type="text/css" href="http://dev/project-site.themes/smartpr-oss.css" />
		<link rel="stylesheet" type="text/css" href="http://dev/jquery.htmleditable.js/_site/assets/site.css" />
	</head>
	<body>
		<header>
			<h1>jquery.htmleditable.js <span class="version">vmaster</span></h1>
			<h2>contenteditableâ€™s missing API</h2>
		</header>
		
		<nav>
			<a href="http://dev/jquery.htmleditable.js/_site/index.html">overview</a>
			<a href="http://dev/jquery.htmleditable.js/_site/demo.html" class="selected">demo</a>
			<a href="https://github.com/smartpr/jquery.htmleditable.js/raw/master/jquery.htmleditable.standalone.min.js">download</a>
			<a href="http://dev/jquery.htmleditable.js/_site/doc/index.html">documentation</a>
			<a href="http://dev/jquery.htmleditable.js/_site/test.html">tests</a>
			<a href="https://github.com/smartpr/jquery.htmleditable.js">development</a>
		</nav>

		<section>
			<script type="text/javascript" src="lib/rangy-core.js"></script>
<script type="text/javascript" src="lib/rangy-selectionsaverestore.js"></script>
<script type="text/javascript" src="lib/jquery.pluginify.js"></script>
<script type="text/javascript" src="lib/jquery.hotkeys.js"></script>
<script type="text/javascript" src="lib/core.js"></script>
<script type="text/javascript" src="lib/base.js"></script>
<script type="text/javascript" src="lib/native.js"></script>
<script type="text/javascript" src="lib/linebreaks.js"></script>
<script type="text/javascript" src="lib/singleline.js"></script>
<script type="text/javascript" src="lib/bold.js"></script>
<script type="text/javascript" src="lib/link.js"></script>
<script type="text/javascript" src="lib/list.js"></script>

<aside id="preview">
	<h3>Live preview</h3>
	<div class="content"></div>
</aside>

<article>
	<p>Proof that <dfn>htmleditable</dfn> is Versatile &#8211; yeah that&#8217;s right, with a capital <em>V</em>.</p>

<h3 id='rich_text_area'>Rich text area</h3>

<p>It can be used as a <code>textarea</code> replacement, including resizing corner tip (in browsers that have them on text areas).</p>
<style>
  html.gecko #demo-area {
    outline: none;
  }
  html.msie #demo-area {
    border: 1px solid #7f9db9;
  }
  #demo-area {
    -moz-appearance: textfield;
    -webkit-appearance: textfield;
    appearance: textfield;
    /* Enable scrollbars when necessary. */
    overflow-x: auto;
    overflow-y: auto;
    /* Like `textarea`'s default behavior, make it resizable in both
       dimensions (if supported by the browser). */
    resize: both;
    /* Give it some initial size below which it will not be resizable. */
    width: 20em;
    height: 5em;
    padding: .5em;
  }
  #demo-area > p:last-child {
    margin-bottom: 0;
  }
</style><div id='demo-area'>
  <div>
  	<p>
  		Yeah this was <strong>already</strong> in here...
  	</p>
  </div>
  Last line
</div><script>
  $(function() {
    $('#demo-area').htmleditable('linebreaks', ['bold', 'link', 'list']);
  });
</script>
</article>
<script>
	
	jQuery(function($) {
		
		// Update the live preview.

		$(':htmleditable').on('focus change', function() {
			$('#preview > .content').html($(this).htmleditable('value'));
		});

		// Make the live preview always be within the viewport.

		// TODO: max-height for both $content and $sticky.

		var $content = $('#preview > .content'),
			spacing = $content.offset().top - $content.prev().offset().top - $content.prev().outerHeight(),
			$sticky = $content.clone().css({
				position: 'fixed',
				top: spacing,
				left: $content.offset().left,
				width: $content.width()
			}).hide().insertAfter($content);
		
		$(window).
			on('scroll', function() {
				var isStickyNeeded = $content.offset().top - $(document).scrollTop() <= spacing;
				if ($sticky.is(':visible') !== isStickyNeeded) {
					$sticky[isStickyNeeded ? 'show' : 'hide']();
					$content.css('visibility', isStickyNeeded ? 'hidden' : '');
				}
			}).
			on('resize', function() {
				// Is being called when zooming as well.
				// TODO: That is, in Chrome. Other browsers?
				$sticky.css({
					left: $content.offset().left,
					width: $content.width()
				});
			});
	
	});

</script>
		</section>

		<footer>
			<p>
				Made with <span class="love">&hearts;</span> by
				<a href="http://twitter.com/timmolendijk">Tim Molendijk</a>
			</p>
			<button class="no-theme">Disable Theme</button>
		</footer>
		<script type="text/javascript">
			
			$('footer .no-theme').on('click', function() {
				$('[type="text/css"].theme').add(this).remove();
			});

		</script>
	</body>
</html>